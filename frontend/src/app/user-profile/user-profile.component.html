<h1>Profilübersicht</h1>

<button *ngIf="!edit" class="btn topButton base-bg me-2" (click)="editValues();">Bearbeiten aktivieren</button>
<button *ngIf="edit" class="btn topButton base-bg me-2" (click)="edit = false;">Bearbeiten deaktivieren</button>
<button *ngIf="roles.includes('default')" class="btn topButton me-2" style="background-color: red"
        (click)="deleteAccount()"
        (click)="edit = false;">Account Löschen!
</button>
<div class="card card-shadow text-white p-3 mb-5" style="border-top-left-radius: 0">
  <div *ngIf="!edit">
    <div class="row p-3 pb-0">
      <h4 class="base-color">Accountdaten:</h4>
      <div class="row row-cols-md-2 row-cols-1">

        <div class="col base-dark-color">Nutzername:</div>
        <div class="col">{{userProfile?.username}}</div>

        <div class="col base-dark-color">Vorname:</div>
        <div class="col">{{userProfile?.firstName}}</div>

        <div class="col base-dark-color">Nachname :</div>
        <div class="col">{{userProfile?.lastName}}</div>

        <div class="col base-dark-color">E-Mail:</div>
        <div class="col">{{userProfile?.email}}</div>

        <div class="col base-dark-color">Passwort:</div>
        <div class="col">********</div>

      </div>
    </div>
  </div>

  <div *ngIf="edit">
    <form [formGroup]="userForm">
      <div class="p-3 pb-0">
        <div class="row ">

          <div class="p-2">
            <div>Nutzername<p style="display:inline; color:red"> *</p></div>
            <input type="text" formControlName="nickname" class="form-control" type="text" placeholder="Nutzername"
                   [ngClass]="{'is-invalid': userForm.controls['nickname'].getError('incorrect')}">
          </div>
          <div class="p-2">
            <div>Vorname<p style="display:inline; color:red"> *</p></div>
            <input type="text" class="form-control" formControlName="firstname" placeholder="Vorname"
                   [ngClass]="{'is-invalid': userForm.controls['firstname'].getError('incorrect')}">
          </div>

          <div class="p-2">
            <div>Nachname<p style="display:inline; color:red"> *</p></div>
            <input type="text" class="form-control" formControlName="lastname" placeholder="Nachname"
                   [ngClass]="{'is-invalid': userForm.controls['lastname'].getError('incorrect')}">
          </div>

          <div class="p-2">
            <div>E-Mail<p style="display:inline; color:red"> *</p></div>
            <input type="email" class="form-control" formControlName="mail" placeholder="E-Mail"
                   [ngClass]="{'is-invalid': userForm.controls['mail'].getError('incorrect')}">
          </div>

          <div class="p-2">
            <a class="link-base-reverse"
               href="https://keycloak.crashtec.de/auth/realms/RoboCup/login-actions/reset-credentials?client_id=app-frontend&tab_id=e431ajrhB0w">Passwort
              ändern?</a>
          </div>

        </div>
        <div class="col">
          <div class="d-flex flex-row justify-content-between">
            <div style="float: left;"
                 class="pt-3 pb-3 d-flex flex-column flex-md-row justify-content-center justify-content-md-start">
              <button class="btn base-bg text-white" type="submit" (click)="save()">Speichern</button>
              <button class="btn" style="color:red" type="submit" (click)="edit = false;">Abbrechen</button>
            </div>
            <div class="d-flex align-items-center">
              <label style="white-space: nowrap;">Pflichtfeld<p style="display:inline; color:red"> *</p></label>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<!--############################################### MODALE ##########################################################-->
<ng-template #basicModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Account löschen</h4>
    <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body bg-dark text-white" style="text-align: center;">
    <div class="pt-4">
      Sie sind gerade dabei Ihren Account mit allen Daten zu löschen!
      <h1 class="p-3">Sind Sie sich sicher?</h1>
    </div>
    <div>
      <button type="button" class="btn" style="color: grey; padding-right: 15px;" (click)="modal.dismiss()">Abbrechen
      </button>
      <button type="button" class="btn btn-danger" (click)="modal.close()">Löschen</button>
    </div>
  </div>
</ng-template>
